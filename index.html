<!DOCTYPE html>
<!--
 *  Copyright (c) 2021 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
-->
<html>
<head>

    <meta charset="utf-8">
    <meta name="description" content="WebRTC code samples">
    <meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1, maximum-scale=1">
    <meta itemprop="description" content="Client-side WebRTC code samples">
    <meta itemprop="name" content="WebRTC code samples">
    <meta name="mobile-web-app-capable" content="yes">
    <meta id="theme-color" name="theme-color" content="#ffffff">

    <base target="_blank">

    <title>Insertable Streams - Audio</title>

    <link href="//fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="./index.css">

</head>

<body>

<div id="container">

    <h1>
        <span>Realtime audio coding with <a href="//ai.googleblog.com/2021/08/soundstream-end-to-end-neural-audio.html" title="Soundstream codec">Soundstream</a></span>
    </h1>

    <p>This example demonstrates Google's Soundstream, a neural audio codec.
        It encodes audio from the microphone to 3200 kpbs and decodes the encoded packets and plays it back.
        Warning: if you're not using headphones, pressing Start will cause feedback.
    </p>
    <audio id="audioOutput" controls></audio>

    <div>
        <button type="button" id="startButton">Start</button>
        <button type="button" id="stopButton" disabled>Stop</button>
        <button type="button" id="enableLyraButton">Enable Soundstream</button>
        <div>

            <p>Warning: if you're not using headphones, pressing Start may cause feedback.
            </p>

            <p>
                <b>Note</b>: This example is using the experimental MediaStreamTrack API that has not yet been
                standardized. On Desktop, it works on the latest releases of Chrome, Edge and Opera browsers. On Mobile,
                it works on Chrome Android, Opera Android and does not work on iOS.
                See <a
                    href="https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamTrackProcessor#browser_compatibility"
                    title="browser compatibility">browser compatibility</a>.
            </p>
            <a href="https://github.com/simplertc-io/soundstream"
               title="Source for this page" id="viewSource">View Soundstream's source on GitHub.</a>
            <p>
                Overall, the quality of speech Lyra generates here after encoding to 3 kbps is okay.
                The sample speech clips on Google's <a
                    href="https://ai.googleblog.com/2021/02/lyra-new-very-low-bitrate-codec-for.html"
                    title="Lyra codec">blogpost</a> are definitely better. Even better quality audio is produced by <a
                    href="https://ai.googleblog.com/2021/08/soundstream-end-to-end-neural-audio.html"
                    title="Soundstream codec">Soundstream</a>, another neural audio codec.
            </p>


        </div>

        <script src="https://webrtc.github.io/adapter/adapter-latest.js" crossorigin></script>
        <script type="module" src="demo.js" async></script>

        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
            import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries

            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
                apiKey: "AIzaSyD7lERsKsqQfRI5s-6s4ssEmIOfMccxuzk",
                authDomain: "simplertc-9a921.firebaseapp.com",
                projectId: "simplertc-9a921",
                storageBucket: "simplertc-9a921.appspot.com",
                messagingSenderId: "562650277743",
                appId: "1:562650277743:web:57be60b478a88a0b642a9a",
                measurementId: "G-B7P1D2SPNV"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app);
        </script>
</body>
</html>