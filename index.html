<!DOCTYPE html>
<!--
 *  Copyright (c) 2021 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
-->
<html>
<head>

    <meta charset="utf-8">
    <link rel="icon" href="./wave.png"/>
    <meta name="description" content="Lyra on webassembly">
    <meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1, maximum-scale=1">
    <meta itemprop="description" content="Lyra in-browser on webassembly">
    <meta itemprop="name" content="Lyra on webassembly">
    <meta name="mobile-web-app-capable" content="yes">
    <meta id="theme-color" name="theme-color" content="#ffffff">

    <base target="_blank">

    <title>Lyra on webassembly</title>

    <link href="//fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="./index.css">

</head>

<body>

<div id="container">

    <h1>
        <span>Audio coding with <a href="https://ai.googleblog.com/2021/02/lyra-new-very-low-bitrate-codec-for.html"
                                   title="Lyra codec">Lyra</a></span>
    </h1>

    <p>This example demonstrates Lyra, an <a href="https://github.com/google/lyra" title="Lyra github">open-source</a>
        neural speech codec from Google, running on webassembly. Press Start and speak into the microphone. Compare the
        audio quality with Lyra enabled and disabled. Lyra encodes your speech to <b>3 Kbps</b>, and decodes and plays
        it back.
    </p>
    <audio id="audioOutput" controls></audio>
    <br></br>
    <div>
        <button type="button" id="startButton">Start</button>
        <button type="button" id="stopButton" disabled>Stop</button>
        <button type="button" id="enableLyraButton">Enable Lyra</button>
        <div>

            <p>Warning: if you're not using headphones, pressing Start may cause feedback.
            </p>

            <p>
                <b>Note</b>: This example is using the experimental MediaStreamTrack API that has not yet been
                standardized. On Desktop, it works on the latest releases of Chrome, Edge and Opera browsers. On Mobile,
                it works on Chrome Android, Opera Android and does not work on iOS.
                See <a
                    href="https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamTrackProcessor#browser_compatibility"
                    title="browser compatibility">browser compatibility</a>.
            </p>
            <a href="https://github.com/simplertc-io/lyra_demo"
               title="Source for this page" id="viewSource">View source on GitHub.</a>
            <p>
                Overall, the quality of speech Lyra generates here after encoding to 3 kbps is okay.
                The sample speech clips on Google's <a
                    href="https://ai.googleblog.com/2021/02/lyra-new-very-low-bitrate-codec-for.html"
                    title="Lyra codec">blogpost</a> are definitely better. Even better quality audio is produced by <a
                    href="https://ai.googleblog.com/2021/08/soundstream-end-to-end-neural-audio.html"
                    title="Soundstream codec">Soundstream</a>, another neural audio codec.
            </p>

        </div>

        <script src="https://webrtc.github.io/adapter/adapter-latest.js" crossorigin></script>
        <script type="module" src="./index.js" async></script>
        <script type="module">
            // Import the functions you need from the SDKs you need
            import {initializeApp} from "https://www.gstatic.com/firebasejs/9.9.0/firebase-app.js";
            import {getAnalytics} from "https://www.gstatic.com/firebasejs/9.9.0/firebase-analytics.js";
            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
                apiKey: "AIzaSyAocFzp-5GTs0Wq1FTnRc3a7s0mbHlP4SM",
                authDomain: "lyra-69165.firebaseapp.com",
                projectId: "lyra-69165",
                storageBucket: "lyra-69165.appspot.com",
                messagingSenderId: "832972574701",
                appId: "1:832972574701:web:95a45730d0c5ca7b60e1e4",
                measurementId: "G-QBHNJRYFLQ"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app);
        </script>


</body>
</html>